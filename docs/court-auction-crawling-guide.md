# 대법원 경매 데이터 크롤링 가이드

> 작성일: 2024-12-18
> 목적: ONSIA 경매 페이지 데이터 연동을 위한 크롤링 전략

---

## 1. 대법원 경매 시스템 분석

### 1.1 주요 사이트
| 사이트 | URL | 용도 |
|--------|-----|------|
| 대법원 경매정보 | courtauction.go.kr | 경매 물건 정보 (메인) |
| 인터넷등기소 | iros.go.kr | 등기부등본 열람 (유료) |
| 등기정보광장 | data.iros.go.kr | 등기 통계 API (무료) |
| 한국감정평가사협회 | kapanet.or.kr | 감정평가서 PDF 호스팅 |

### 1.2 대법원 경매 사이트 기술 스택
- **프레임워크**: WebSquare (인스웨이브시스템즈)
- **통신 방식**: AJAX + JSON
- **특이사항**: iframe 기반 팝업, 동적 URL 생성

---

## 2. 크롤링 가능한 데이터

### 2.1 무료 데이터 (대법원 직접 제공)

| 데이터 | 출처 | 비용 | 갱신주기 |
|--------|------|------|----------|
| 물건 기본정보 | courtauction.go.kr | 무료 | 실시간 |
| 기일내역 (매각기일, 결과) | courtauction.go.kr | 무료 | 실시간 |
| 목록내역 (부동산 상세) | courtauction.go.kr | 무료 | 실시간 |
| 감정평가요항표 요약 | courtauction.go.kr | 무료 | 실시간 |
| 인근매각통계 | courtauction.go.kr | 무료 | 실시간 |
| 사건 이미지 (전경도, 위치도) | courtauction.go.kr | 무료 | 실시간 |

### 2.2 경매 3대 서류 (PDF)

| 서류 | 출처 | 비용 | 내용 |
|------|------|------|------|
| 감정평가서 | ca.kapanet.or.kr | 무료 | 감정가 산출 근거, 위치/환경, 토지이용계획 |
| 현황조사서 | courtauction.go.kr | 무료 | 점유 현황, 임차인 정보 |
| 매각물건명세서 | courtauction.go.kr | 무료 | 권리관계 요약, 인수 조건 |

### 2.3 유료 데이터

| 데이터 | 출처 | 비용 |
|--------|------|------|
| 등기부등본 (건물) | iros.go.kr | 열람 700원 / 발급 1,000원 |
| 등기부등본 (토지) | iros.go.kr | 열람 700원 / 발급 1,000원 |

---

## 3. URL 패턴 분석

### 3.1 대법원 경매 URL 구조
```
# 물건상세검색 페이지
https://www.courtauction.go.kr/pgj/index.on?w2xPath=/pgj/ui/pgj100/PGJ151F00.xml

# 파라미터
- 법원코드: 서울중앙지방법원 = 000210
- 사건번호: 2022타경3289 → 20220130003289 (년도4자리 + 01 + 30 + 사건번호6자리)
```

### 3.2 감정평가서 PDF URL
```
# kapanet.or.kr 호스팅
https://ca.kapanet.or.kr/view/{법원코드}/{사건정보}/{회차}/{문서ID}/{날짜}

# 예시
https://ca.kapanet.or.kr/view/000210/20220130003289/1/VUM-20221024-01/20221104
```

### 3.3 경쟁사(두인경매) 파일 패턴 분석
```
/FILE/CA/{문서유형}/{법원코드}/{년도}/{파일명}.pdf

# 문서유형
- DB: 건물등기 (Document Building)
- DT: 토지등기 (Document Terrain)
- SA: 현황조사서 (Survey Analysis)
- AP: 감정평가서 (Appraisal)
- MS: 매각물건명세서 (Sale Statement)

# 예시
/FILE/CA/DB/1710/2024/DB-1710-2024085191-0000-01.pdf
```

### 3.4 법원 코드
| 코드 | 법원명 |
|------|--------|
| 000210 | 서울중앙지방법원 |
| 1710 | 광주지방법원 |
| ... | (전국 법원 코드 목록 필요) |

---

## 4. 등기정보광장 Open API 분석

### 4.1 API 개요
- **URL**: https://data.iros.go.kr/rp/oa/openOapiAppl.do
- **인증**: 회원가입 + 인증키 발급
- **비용**: 무료
- **제한**: 하루 1,000건

### 4.2 제공 API (201개)
**모두 통계 데이터** - 특정 부동산 조회 API 없음

- 강제경매개시결정등기 신청 부동산 현황
- (근)저당권설정등기 현황
- 소유권이전등기 신청 매수인 현황
- 지역별/기간별 등기 통계

### 4.3 결론
❌ 특정 부동산 등기부등본 조회 API 없음
❌ 실거래가 조회 API 없음
→ 경매 물건별 등기 정보는 **경매 서류에서 파싱**해야 함

---

## 5. 크롤링 전략 제안

### 5.1 전체 크롤링 vs 선택적 크롤링

| 전략 | 장점 | 단점 | 적합한 경우 |
|------|------|------|------------|
| **전체 크롤링** | 완전한 데이터, 검색/필터 자유도 | DB 용량 큼, 크롤링 시간, 법적 리스크 | 경매 전문 사이트 |
| **선택적 크롤링** | DB 경량, 빠른 로딩 | 데이터 제한적 | 경매가 부가 기능인 사이트 |
| **온디맨드 조회** | DB 부담 없음, 항상 최신 | 응답 느림, 대법원 서버 의존 | MVP/테스트 단계 |

### 5.2 ONSIA 추천 전략: **하이브리드 방식**

```
[1단계] 기본 정보만 크롤링 (DB 저장)
- 사건번호, 법원, 물건종류
- 감정가, 최저가, 매각기일
- 소재지, 면적
- 상태 (진행/매각/취소)

[2단계] 상세 정보는 온디맨드 (실시간 조회)
- 기일내역, 입찰결과
- 감정평가서 PDF
- 현황조사서, 매각물건명세서

[3단계] 권리분석 데이터 (별도 테이블)
- 감정평가서에서 파싱한 등기 요약
- 임차인 현황
- 권리 인수/소멸 정보
```

### 5.3 DB 용량 추정

**전체 크롤링 시 (전국 경매 물건)**
- 월간 신규 물건: 약 15,000~20,000건
- 물건당 기본 정보: 약 2KB
- 물건당 상세 정보 (JSON): 약 10KB
- 물건당 이미지 URL: 약 1KB
- **월간 증가량**: 약 200~300MB

**선택적 크롤링 시 (특정 지역/유형만)**
- 서울/수도권만: 약 5,000건/월
- **월간 증가량**: 약 60~100MB

### 5.4 크롤링 주기

| 데이터 | 권장 주기 | 이유 |
|--------|----------|------|
| 신규 물건 | 1일 1회 | 매각기일 2주 전 공개 |
| 기일 결과 | 매각기일 다음날 | 결과 확정 |
| 가격 변동 | 유찰 후 1주일 | 차회 최저가 변경 |

---

## 6. 기술 구현 방안

### 6.1 크롤링 기술 스택
```typescript
// 추천 스택
- Playwright: 동적 페이지 렌더링, WebSquare 대응
- Cheerio: HTML 파싱 (정적 페이지)
- node-cron: 스케줄링
- Prisma: DB ORM
```

### 6.2 데이터 흐름
```
[대법원 사이트]
    ↓ Playwright 크롤링
[크롤러 서버]
    ↓ 파싱 & 정제
[PostgreSQL/SQLite]
    ↓ Prisma ORM
[Next.js API]
    ↓
[프론트엔드]
```

### 6.3 법적 고려사항
- 대법원 경매 정보는 **공공데이터**로 크롤링 가능
- robots.txt 준수 권장
- 과도한 요청 자제 (rate limiting)
- 상업적 이용 시 출처 명시

---

## 7. 다음 단계

### 7.1 구현 우선순위
1. ✅ 대법원 사이트 구조 분석 (완료)
2. ⬜ 크롤러 프로토타입 개발
3. ⬜ DB 스키마 설계 (Auction 테이블 확장)
4. ⬜ API 엔드포인트 구현
5. ⬜ 프론트엔드 연동

### 7.2 추후 검토
- 등기부등본 유료 발급 자동화 (인기 물건만)
- PDF 파싱 자동화 (감정평가서 → 권리분석)
- AI 기반 투자 분석 고도화

---

## 참고 자료

- [대법원 경매정보](https://www.courtauction.go.kr)
- [등기정보광장](https://data.iros.go.kr)
- [인터넷등기소](https://www.iros.go.kr)
